---
import type { GetStaticPaths } from 'astro';
import Chapter from '$layouts/Chapter.astro';
import { buildChapter } from '$lib/chapters';

import { getCollection } from 'astro:content';

export const getStaticPaths = (async () => {
  return Promise.all(
    (await getCollection('chapters')).map(async (c) => {
      const chapter = await buildChapter(c);
      return {
        params: {
          chapter: c.slug,
        },
        props: {
          chapter,
        },
      };
    }),
  );
}) satisfies GetStaticPaths;

const { chapter } = Astro.props;
const { Content } = chapter;
---

<Chapter chapter={chapter}>
  <Content slot="content" />
  <!-- <Content slot='content' /> -->
  <!-- <SiteLanding /> -->
</Chapter>
